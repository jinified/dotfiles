(function(c){c.initialize=function(){chrome.runtime.onConnect.addListener(function(d){if(0===d.name.indexOf("requestPort")){var e=c.initializeRequestFramework({sendContentScript:function(b){if(d.disconnected)return!1;d.postMessage(b);return!0},windowID:d.sender&&d.sender.tab?d.sender.tab.windowId:null,tabURL:d.sender&&d.sender.tab?d.sender.tab.url:null,tabID:d.sender&&d.sender.tab?d.sender.tab.id:null});d.onMessage.addListener(e.requestHandler);d.onDisconnect.addListener(function(){d.disconnected=
!0;e.disconnectHandler()})}})};c.openPopoverDialog=function(d){c.openTabDialog.apply(c,arguments)};c.refreshGroupNames=function(){};c.closePopovers=function(){chrome.extension.getViews({type:"popup"}).forEach(function(d){d.close()})};c.getFavicon=function(){var d=null,c=function(b,a){var f=document.createElement("img");f.src=b;f.addEventListener("load",function(){var b;b="";try{var c=document.createElement("canvas");c.height=f.clientHeight;c.width=f.clientWidth;c.getContext("2d").drawImage(f,0,0);
b=c.toDataURL()}catch(h){}document.body.removeChild(f);a(b)});f.addEventListener("error",function(){a("");document.body.removeChild(f)});document.body.appendChild(f)};document.addEventListener("DOMContentLoaded",function(){c("chrome://favicon/",function(b){d=b})});return function(b){b.url&&b.callback&&c("chrome://favicon/"+b.url,function(a){b.callback(a===d?"":a)})}}();(function(){var d=function(b){var a=chrome.extension.getViews({type:"tab",windowId:b.windowID});if(1===a.length)return a[0];for(var c=
0,d=a.length;c<d;++c){var e=a[c];if(e.tabID===b.tabID)return e}return null},e=function(b,a){LPTabs.get({tabID:b.id,callback:function(c){if(a.inject){var f=0,e=[].concat(a.inject.files),h=function(){++f===e.length&&(c.extendTop({context:a.inject.context}),a.inject.allFrames&&c.extendFrames({context:a.inject.context}),a.loadHandler&&a.loadHandler(c))};e.forEach(function(c){chrome.tabs.executeScript(b.id,{file:c,allFrames:a.inject.allFrames},h)})}else a.loadHandler&&a.loadHandler(c);if(a.closeHandler){var g=
d(c.tabDetails);g&&g.addEventListener("beforeunload",function(){a.closeHandler(g)})}}})};c.getCurrentTab=function(b){chrome.tabs.query({active:!0,currentWindow:!0},function(a){1===a.length&&LPTabs.get({tabID:a[0].id,callback:b})})};c.openDialogWindow=function(b){var a=b.features||{};a.url=b.url;a.type=chrome.windows.CreateType.POPUP;chrome.windows.create(a,function(a){e(a.tabs[0],b)})};c.openTab=function(b){chrome.tabs.create({url:b.url,active:!b.inactive},function(a){e(a,b)})};c.openWindow=function(b){chrome.windows.create({url:b.url},
function(a){e(a.tabs[0],b)})};c.openSame=function(b){chrome.tabs.update(null,{url:b.url},function(a){e(a,b)})};c.navigateTab=function(b){chrome.tabs.update(b.tabId,{url:b.url,active:!0},function(a){e(a,b)})};c.activateTab=function(b){chrome.windows.update(b.windowID,{focused:!0});chrome.tabs.update(b.tabID,{active:!0})};c.closeTab=function(b){chrome.tabs.remove(b.tabID)};c.onTabUpdated=function(b){if("function"===typeof b){var a=function(a,c){"complete"===c.status&&LPTabs.get({tabID:c.tabId,callback:b})};
chrome.tabs.onUpdated.addListener(a)}return function(){chrome.tabs.onUpdated.removeListener(a)}};c.onTabActivated=function(b){if("function"===typeof b){var a=function(a){LPTabs.get({tabID:a.tabId,callback:b})};chrome.tabs.onActivated.addListener(a)}return function(){chrome.tabs.onActivated.removeListener(a)}};c.onTabClosed=function(b){if("function"===typeof b){var a=function(a){b(a)};chrome.tabs.onRemoved.addListener(a)}return function(){chrome.tabs.onRemoved.removeListener(a)}};c.onTransition=function(b){if("function"===
typeof b){var a=function(a){b(a)};chrome.webNavigation.onCommitted.addListener(a)}return function(){chrome.webNavigation.onCommitted.removeListener(a)}}})()})(LPPlatform);
