LPContentScriptTools=function(){var m=function(){return function(a,c){var b=document.createElement("img");b.src=a;b.addEventListener("load",function(){var a;a="";try{var g=document.createElement("canvas");g.height=b.clientHeight;g.width=b.clientWidth;g.getContext("2d").drawImage(b,0,0);a=g.toDataURL()}catch(f){}document.body.removeChild(b);c(a)});b.addEventListener("error",function(){c("");document.body.removeChild(b)});document.body.appendChild(b)}}(),k=function(){return function(a){var c=[];if(a.searches){a.searches=
[].concat(a.searches);for(var b=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT);b.nextNode();){var d;a:{d=b.currentNode;if(d.parentElement)switch(d.parentElement.nodeName){case "SCRIPT":d=!1;break a}d=!0}if(d){a:{d=a;for(var g=b.currentNode.nodeValue.trim(),f=null,e=0;e<d.searches.length;++e){var h=d.searches[e];if(d.exactMatch){if(g===h){d=h;break a}}else-1<g.indexOf(h)&&(null===f||h.length>f.length)&&(f=h)}d=f}if(d&&(c.push({parent:b.currentNode.parentElement,match:d,matchingText:b.currentNode.nodeValue.trim()}),
!a.searchAll))break}}}return a.searchAll?c:c[0]}}(),l=function(a){return"FORM"===a.nodeName};return{getFavicon:function(a){for(var c=[],b=document.getElementsByTagName("link"),d=0,g=b.length;d<g;++d){var f=b[d],e=f.getAttribute("rel");e&&-1<e.indexOf("icon")&&(f=f.getAttribute("href"),"svg"!==f.substring(f.length-3)&&c.push(f))}c.push(document.location.origin+"/favicon.ico");var h=0,k=function(b){b?a(b):h>c.length-1?bg.LPPlatform.getFavicon({url:document.location.href,callback:a}):m(c[h++],k)};k()},
findText:function(a){var c=k(a),c=c?c.match:null;a.callback&&a.callback(c);return c},isUnloading:function(){var a=!1;window.addEventListener("beforeunload",function(c){!1!==c.isTrusted&&(a=!0)});return function(){return a}}(),findTextNodes:k,isForm:l,getForm:function(a){for(;a;){if(l(a))return a;a=a.parentElement}return null},isClickable:function(a){if("function"===typeof document.elementFromPoint){a instanceof $&&(a=a.get(0));var c=a.getBoundingClientRect();return document.elementFromPoint(c.left+
parseInt(c.width/2),c.top+parseInt(c.height/2))===a}return!0},isVisible:function(a){a instanceof $||(a=$(a));if(!a.is(":visible"))return!1;for(var c=a.get(0).getBoundingClientRect(),b=a.get(0),d=a=0,g=window.innerWidth,f=window.innerHeight,b=b.parentElement;b;){0<b.scrollLeft&&(d-=b.scrollLeft);0<b.scrollTop&&(a-=b.scrollTop);var e;b.scrollWidth>b.clientWidth?(e=$(b).css("overflow-x"),e="auto"===e||"scroll"===e):e=void 0;e&&(g+=b.scrollWidth-b.clientWidth);b.scrollHeight>b.clientHeight?(e=$(b).css("overflow-y"),
e="auto"===e||"scroll"===e):e=void 0;e&&(f+=b.scrollHeight-b.clientHeight);b=b.parentElement}return!(c.right<d||c.bottom<a||c.left>d+g||c.top>a+f)}}}();
