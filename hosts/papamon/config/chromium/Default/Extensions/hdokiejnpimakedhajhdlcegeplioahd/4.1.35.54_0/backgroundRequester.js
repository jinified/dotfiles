LPBackgroundRequester=function(k,c){c=c||{};var l=this,b=null,e=!1,f=[],d,m=c.interfaceDefinition,h=Date.now(),n=function(a,b){LPMessaging.handleRequest(m,a,function(a){g({type:"contentScriptResponse",data:a,frameID:b})},{context:c.reflectionContext,additionalArguments:b})},g=function(a){a.sourceFrameID=b;LPMessaging.makeRequest(d,a)},p=function(a){if(a.frameID===b)switch(a.type){case "backgroundResponse":case "contentScriptResponse":LPMessaging.handleResponse(a.data);break;case "contentScriptRequest":n(a.data,
a.sourceFrameID)}else if("initialization"===a.type&&(a=a.data,null===b&&a.request.initializationID===h)){"undefined"!==typeof Topics&&Topics.get(Topics.REQUEST_FRAMEWORK_INITIALIZED).publish(a,l);b=a.frameID;e=!1;d({type:"initialized",sourceFrameID:b});a=0;for(var c=f.length;a<c;++a)f[a]()}};this.initialize=function(a){null!==b||e||(d=k(p),d({type:"initialize",data:{initializationID:h,interfaceName:c.interfaceName,top:c.mainRequestFramework}}),e=!0);a&&f.push(a)};this.sendRequest=function(a){null===
b?this.initialize(function(){g(a)}):g(a)}};
